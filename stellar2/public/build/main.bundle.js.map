{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://stellar2/webpack/runtime/async module","webpack://stellar2/webpack/runtime/load script","webpack://stellar2/webpack/bootstrap","webpack://stellar2/../lib/ecs/index.js","webpack://stellar2/../lib/fe/touch.js","webpack://stellar2/webpack/runtime/define property getters","webpack://stellar2/webpack/runtime/ensure chunk","webpack://stellar2/webpack/runtime/get javascript chunk filename","webpack://stellar2/webpack/runtime/harmony module decorator","webpack://stellar2/webpack/runtime/hasOwnProperty shorthand","webpack://stellar2/webpack/runtime/make namespace object","webpack://stellar2/webpack/runtime/wasm loading","webpack://stellar2/webpack/runtime/publicPath","webpack://stellar2/webpack/runtime/jsonp chunk loading","webpack://stellar2/../lib/shapes/vector.js","webpack://stellar2/../lib/ecs/physics/transform.js","webpack://stellar2/../lib/ecs/physics/physics.js","webpack://stellar2/../lib/shapes/circle.js","webpack://stellar2/../lib/ecs/physics/plasticColisionEngine.js","webpack://stellar2/../lib/ecs/physics/gravityEngine.js","webpack://stellar2/../lib/shapes/box.js","webpack://stellar2/../lib/shapes/text.js","webpack://stellar2/../lib/shapes/sprite.js","webpack://stellar2/../lib/shapes/rounded-box.js","webpack://stellar2/../lib/ecs/physics/transformRotate.js","webpack://stellar2/../lib/shapes/noScale.js","webpack://stellar2/../lib/shapes/scale.js","webpack://stellar2/../lib/ecs/drawers/render.js","webpack://stellar2/./src/gravityColorEngine.js","webpack://stellar2/../lib/math/view.js","webpack://stellar2/../lib/ecs/drawers/ploter.js","webpack://stellar2/../lib/ecs/drawers/drawFPS.js","webpack://stellar2/../lib/math/vec.js","webpack://stellar2/../lib/ecs/drawers/drawGrid.js","webpack://stellar2/../lib/ecs/drawers/imageData.js","webpack://stellar2/../lib/ecs/drawers/drawMass.js","webpack://stellar2/../lib/ecs/drawers/drawGalaxy.js","webpack://stellar2/../lib/ecs/drawers/drawGass.js","webpack://stellar2/../lib/ecs/physics/chainEngine.js","webpack://stellar2/./src/index.js","webpack://stellar2/./src/rustimpl/index.js","webpack://stellar2/./src/colors.js"],"sourcesContent":["var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && !queue.d) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = 1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && (queue.d = 0);\n};","var inProgress = {};\nvar dataWebpackPrefix = \"stellar2:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","const ENTITY_INDEX_BITS = 22\r\nconst ENTITY_INDEX_MASK = (1 << ENTITY_INDEX_BITS) - 1\r\n\r\nconst ENTITY_GENERATION_BITS = 8\r\nconst ENTITY_GENERATION_MASK = (1 << ENTITY_GENERATION_BITS) - 1\r\nconst MINIMUM_FREE_INDICES = 0\r\n\r\nfunction Entity(id) {\r\n\tthis.id = id\r\n}\r\nEntity.prototype.index = function () {\r\n\treturn this.id & ENTITY_INDEX_MASK\r\n}\r\nEntity.prototype.generation = function () {\r\n\treturn (this.id >> ENTITY_INDEX_BITS) & ENTITY_GENERATION_MASK\r\n}\r\n\r\nfunction EntityManager() {\r\n\tthis._generation = {}\r\n\tthis._free_indices = []\r\n\tthis._entities = {}\r\n\tthis._components = {}\r\n\tthis.__entities_with_type = {}\r\n}\r\n\r\nEntityManager.prototype.create = function () {\r\n\tvar idx = 0\r\n\tif (this._free_indices.length > MINIMUM_FREE_INDICES) {\r\n\t\tidx = this._free_indices.shift()\r\n\t} else {\r\n\t\tidx = Object.keys(this._generation).length\r\n\t\tthis._generation[idx] = 0\r\n\t}\r\n\tvar entity = this.make_entity(idx, this._generation[idx])\r\n\tthis._entities[idx] = entity\r\n\treturn entity\r\n}\r\n\r\nEntityManager.prototype.make_entity = function (idx, generation) {\r\n\treturn new Entity(idx + (generation << ENTITY_INDEX_BITS))\r\n}\r\n\r\nEntityManager.prototype.alive = function (e) {\r\n\treturn this._generation[e.index()] == e.generation()\r\n}\r\n\r\nEntityManager.prototype.destroy = function (e) {\r\n\tthis._components[e.id] = undefined\r\n\tthis._entities[e.id] = undefined\r\n\t++this._generation[e.index()]\r\n\tthis._free_indices.push(e.index())\r\n}\r\n\r\nEntityManager.prototype.asign = function (component, e) {\r\n\tvar entity_components = this._components[e.id]\r\n\tif (!entity_components) {\r\n\t\tthis._components[e.id] = {\r\n\t\t\t[component.constructor.name]: [component]\r\n\t\t}\r\n\t\treturn\r\n\t}\r\n\tvar components_of_type = entity_components[component.constructor.name]\r\n\tif (!components_of_type) {\r\n\t\tthis._components[e.id][component.constructor.name] = [component]\r\n\t\treturn\r\n\t}\r\n\tif (components_of_type &&\r\n\t\tentity_components[component.constructor.name].find(comp => component === comp)\r\n\t)\r\n\t\tthrow Error('Component is allready asiged')\r\n\tentity_components[component.constructor.name].push(component)\r\n}\r\n\r\nEntityManager.prototype.get = function (c_type, e) {\r\n\tvar entity_components = this._components[e.id]\r\n\tif (!entity_components) {\r\n\t\treturn []\r\n\t}\r\n\tvar components_of_type = entity_components[c_type.name]\r\n\tif (!components_of_type) {\r\n\t\treturn []\r\n\t}\r\n\treturn components_of_type\r\n}\r\n\r\nEntityManager.prototype.remove = function (component, e) {\r\n\tvar entity_components = this._components[e.id]\r\n\tif (!entity_components) {\r\n\t\treturn\r\n\t}\r\n\tvar components_of_type = entity_components[component.constructor.name]\r\n\tif (!components_of_type) {\r\n\t\treturn\r\n\t}\r\n\tentity_components[component.constructor.name] = entity_components[component.constructor.name].filter(function (compon) {\r\n\t\treturn compon !== component\r\n\t})\r\n}\r\n\r\nEntityManager.prototype.getEnities = function (c_type) {\r\n\treturn Object.values(this._entities).filter(\r\n\t\t(entity) => {\r\n\t\t\treturn entity && this.get(c_type, entity).length\r\n\t\t}\r\n\t)\r\n}\r\n\r\nexport {\r\n\tEntity,\r\n\tEntityManager\r\n}\r\n","// written by Slobodan Zivkovic slobacartoonac@gmail.com\r\nfunction distance2d(a, b) {\r\n\treturn Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y))\r\n}\r\n\r\nfunction len2d(a) {\r\n\treturn Math.sqrt(a.x * a.x + a.y * a.y)\r\n}\r\n\r\nfunction getDelta(p1, n1, p2, n2) {\r\n\tif (!n2) {\r\n\t\treturn { x: n1.x - p1.x, y: n1.y - p1.y }\r\n\t}\r\n\treturn { x: ((n1.x - p1.x) + (n2.x - p2.x)) / 2, y: ((n1.y - p1.y) + (n2.y - p2.y)) / 2 }\r\n}\r\n\r\nfunction getZoom(p1, n1, p2, n2) {\r\n\tif (!n2) {\r\n\t\treturn 1\r\n\t}\r\n\tif (!p2) {\r\n\t\treturn 1\r\n\t}\r\n\tlet initialDistance = distance2d(p1, p2);\r\n\tlet newDistance = distance2d(n1, n2);\r\n\tif (initialDistance < 0.01)\r\n\t\treturn 1\r\n\telse\r\n\t\treturn newDistance / initialDistance\r\n}\r\n\r\nfunction getAngleDelta(p1, n1, p2, n2) {\r\n\tif (!n2) {\r\n\t\treturn 0\r\n\t}\r\n\tlet angle1 = getAngle(p1, p2)\r\n\tlet angle2 = getAngle(n1, n2)\r\n\treturn angle2 - angle1\r\n}\r\n\r\nfunction getAngle(p1, n1) {\r\n\tlet delta = getDelta(p1, n1)\r\n\tlet angle = Math.atan2(delta.y, delta.x)\r\n\treturn angle\r\n}\r\n\r\nfunction Touch(div, deadzone) {\r\n\tthis.deadzone = deadzone\r\n\tthis.clear()\r\n\tlet startPosition = null\r\n\tlet startMoveSecound = null\r\n\tlet position = null\r\n\tlet thisMoveSecound = null\r\n\tlet mouseDown = 0;\r\n\tlet click = true;\r\n\tlet touch = false;\r\n\tlet touchSecound = false;\r\n\tthis.centerPosition = { x: 0, y: 0 };\r\n\tthis.debug = false;\r\n\tthis.console_error = false;\r\n\tthis.throw_error = false;\r\n\tthis.last_error = ''\r\n\tconst moveTouchT = (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst { top, left } = e.target.getBoundingClientRect()\r\n\t\tif (e.touches[1] && e.touches[0]) {\r\n\t\t\tlet first = { x: e.touches[0].clientX - left, y: e.touches[0].clientY - top }\r\n\t\t\tlet secound = { x: e.touches[1].clientX - left, y: e.touches[1].clientY - top }\r\n\t\t\tthis.centerPosition = { x: (first.x + secound.x) / 2, y: (first.y + secound.y) / 2 }\r\n\t\t\treturn moveTouch(first, secound)\r\n\t\t}\r\n\t\tif (e.touches[0]) {\r\n\t\t\tlet first = { x: e.touches[0].clientX - left, y: e.touches[0].clientY - top }\r\n\t\t\tthis.centerPosition = { x: first.x, y: first.y }\r\n\t\t\treturn moveTouch(first)\r\n\t\t}\r\n\t}\r\n\tconst moveTouchM = (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst { top, left } = e.target.getBoundingClientRect()\r\n\t\tthis.centerPosition = { x: e.clientX - left, y: e.clientY - top }\r\n\t\tif (mouseDown) moveTouch({ x: e.clientX - left, y: e.clientY - top })\r\n\t}\r\n\r\n\tconst moveTouch = (e, secound) => {\r\n\t\ttouch = true;\r\n\t\tif (startPosition == null) {\r\n\t\t\tstartPosition = { x: e.x, y: e.y }\r\n\t\t\tposition = { x: e.x, y: e.y }\r\n\t\t\tthis.triger('start', position)\r\n\t\t\tclick = true\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (secound && startMoveSecound == null) {\r\n\t\t\ttouchSecound = true;\r\n\t\t\tif (distance2d(startPosition, secound) < distance2d(startPosition, e)) {\r\n\t\t\t\t//switched touches\r\n\t\t\t\tstartPosition = { x: e.x, y: e.y };\r\n\t\t\t\tposition = { x: e.x, y: e.y };\r\n\t\t\t}\r\n\t\t\tstartMoveSecound = { x: secound.x, y: secound.y }\r\n\t\t\tthisMoveSecound = { x: secound.x, y: secound.y }\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!secound && startMoveSecound) {\r\n\t\t\ttouchSecound = false;\r\n\t\t\tstartMoveSecound = null\r\n\t\t\tthisMoveSecound = null\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tlet delta = getDelta(position, e, thisMoveSecound, secound)\r\n\t\tlet deltaZoom = getZoom(position, e, thisMoveSecound, secound)\r\n\t\tlet deltaAngle = getAngleDelta(position, e, thisMoveSecound, secound)\r\n\t\tposition = { x: e.x, y: e.y }\r\n\t\tthisMoveSecound = secound ? { x: secound.x, y: secound.y } : null\r\n\t\tlet direction = getDelta(startPosition, position, startMoveSecound, thisMoveSecound)\r\n\t\tlet zoom = getZoom(startPosition, position, startMoveSecound, thisMoveSecound)\r\n\t\tlet distance = len2d(direction)\r\n\t\tlet angle = getAngleDelta(startPosition, position, startMoveSecound, thisMoveSecound)\r\n\t\tlet debug = this.debug && `${startPosition && 'Start: ' + JSON.stringify(startPosition)},\r\n\t\t${position && 'This: ' + JSON.stringify(position)}, \r\n\t\t${startMoveSecound && 'Start secound: ' + JSON.stringify(startMoveSecound)}, \r\n\t\t${thisMoveSecound && 'Start this: ' + JSON.stringify(thisMoveSecound)},\r\n\t\t${delta && 'Delta: ' + JSON.stringify(delta)},\r\n\t\t${'Zoom: ' + zoom},\r\n\t\t${'DZoom: ' + deltaZoom}\r\n\t\t${'Angle: ' + angle}\r\n\t\t${'DAngle: ' + deltaAngle}\r\n\t\t${'isPrimary: ' + ((!touchSecound && mouseDown == 0) || mouseDown == 1)}\r\n\t\t${this.last_error}`\r\n\t\tlet addition = {\r\n\t\t\tdelta,\r\n\t\t\tdirection,\r\n\t\t\tstartPosition,\r\n\t\t\tposition,\r\n\t\t\tdistance,\r\n\t\t\tclick,\r\n\t\t\tisClick: click,\r\n\t\t\tmouseDown,\r\n\t\t\tzoom,\r\n\t\t\tdeltaZoom,\r\n\t\t\ttouchSecound,\r\n\t\t\tangle,\r\n\t\t\tdeltaAngle,\r\n\t\t\tisPrimary: ((!touchSecound && mouseDown == 0) || mouseDown == 1),\r\n\t\t\tdebug,\r\n\t\t\tcenterPosition: this.centerPosition\r\n\t\t}\r\n\r\n\t\tthis.triger('force', addition)\r\n\t\tif (distance > this.deadzone) {\r\n\t\t\tclick = false\r\n\t\t\tif (Math.abs(direction.x) > Math.abs(direction.y)) {\r\n\t\t\t\tif (direction.x > 0) {\r\n\t\t\t\t\tthis.triger('right', addition)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.triger('left', addition)\r\n\t\t\t\t}\r\n\t\t\t} else if (direction.y > 0) {\r\n\t\t\t\tthis.triger('down', addition)\r\n\t\t\t} else {\r\n\t\t\t\tthis.triger('up', addition)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//= {up:[],down:[],left:[],right:[],stop:[],click:[],force:[]}\r\n\tconst stopTouch = (e) => {\r\n\t\te.preventDefault()\r\n\t\tif (touch == false) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet delta = { x: 0, y: 0 }\r\n\t\tlet deltaZoom = 0\r\n\t\tlet deltaAngle = 0\r\n\t\tlet direction = getDelta(startPosition, position, startMoveSecound, thisMoveSecound)\r\n\t\tlet zoom = getZoom(startPosition, position, startMoveSecound, thisMoveSecound)\r\n\t\tlet angle = getAngleDelta(startPosition, position, startMoveSecound, thisMoveSecound)\r\n\t\tlet distance = len2d(direction)\r\n\t\tlet debug = this.debug && `${startPosition && 'Start: ' + JSON.stringify(startPosition)},\r\n\t\t${position && 'This: ' + JSON.stringify(position)}, \r\n\t\t${startMoveSecound && 'Start secound: ' + JSON.stringify(startMoveSecound)}, \r\n\t\t${thisMoveSecound && 'Start this: ' + JSON.stringify(thisMoveSecound)},\r\n\t\t${delta && 'Delta: ' + JSON.stringify(delta)},\r\n\t\t${'Zoom: ' + zoom},\r\n\t\t${'DZoom: ' + deltaZoom}\r\n\t\t${'Angle: ' + angle}\r\n\t\t${'DAngle: ' + deltaAngle}\r\n\t\t${'isPrimary: ' + ((!touchSecound && mouseDown == 0) || mouseDown == 1)}\r\n\t\t${this.last_error}`\r\n\t\tconst addition = {\r\n\t\t\tx: startPosition.x,\r\n\t\t\ty: startPosition.y,\r\n\t\t\tdelta,\r\n\t\t\tdirection,\r\n\t\t\tstartPosition,\r\n\t\t\tposition,\r\n\t\t\tdistance,\r\n\t\t\tclick,\r\n\t\t\tisClick: click,\r\n\t\t\tmouseDown,\r\n\t\t\tzoom,\r\n\t\t\tdeltaZoom,\r\n\t\t\ttouchSecound,\r\n\t\t\tangle,\r\n\t\t\tdeltaAngle,\r\n\t\t\tisPrimary: ((!touchSecound && mouseDown == 0) || mouseDown == 1),\r\n\t\t\tdebug,\r\n\t\t\tcenterPosition: this.centerPosition\r\n\t\t}\r\n\t\ttouch = false\r\n\t\ttouchSecound = false;\r\n\t\tlet saveMove = startPosition;\r\n\r\n\t\tif (click) {\r\n\t\t\tif (e.button) {\r\n\t\t\t\tif (e.button === 1) this.triger('bmiddle', addition)\r\n\t\t\t\tif (e.button === 2) this.triger('bright', addition)\r\n\t\t\t} else if (saveMove) {\r\n\t\t\t\tthis.triger('click', addition)\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.triger('stop', addition)\r\n\t\tstartPosition = null\r\n\t\tposition = null\r\n\t\tstartMoveSecound = null\r\n\t\tthisMoveSecound = null\r\n\t\tmouseDown = 0\r\n\t}\r\n\tdiv.addEventListener(\r\n\t\t'touchstart',\r\n\t\te => {\r\n\t\t\te.preventDefault()\r\n\t\t},\r\n\t\tfalse,\r\n\t)\r\n\tdiv.addEventListener('touchmove', moveTouchT, false)\r\n\tdiv.addEventListener('touchend', stopTouch, false)\r\n\tdiv.addEventListener('touchstart', moveTouchT, false)\r\n\tdiv.addEventListener('mouseleave', stopTouch, false)\r\n\tdiv.addEventListener('mousemove', moveTouchM)\r\n\tdiv.addEventListener('mouseup', stopTouch)\r\n\tdiv.addEventListener('mousedown', e => {\r\n\t\tmouseDown = 1 + e.button;\r\n\t\tmoveTouchM(e)\r\n\t})\r\n}\r\n/*eslint-disable */\r\nTouch.prototype.sub = function (ev, func) {\r\n\tif (this.events[ev]) this.events[ev].push(func)\r\n}\r\n\r\nTouch.prototype.onClick = function (func) {\r\n\tthis.events.click.push(func)\r\n}\r\nTouch.prototype.onForce = function (func) {\r\n\tthis.events.force.push(func)\r\n}\r\nTouch.prototype.onStop = function (func) {\r\n\tthis.events.stop.push(func)\r\n}\r\nTouch.prototype.onUp = function (func) {\r\n\tthis.events.up.push(func)\r\n}\r\nTouch.prototype.onDown = function (func) {\r\n\tthis.events.down.push(func)\r\n}\r\nTouch.prototype.onLeft = function (func) {\r\n\tthis.events.left.push(func)\r\n}\r\nTouch.prototype.onRight = function (func) {\r\n\tthis.events.right.push(func)\r\n}\r\n\r\nTouch.prototype.unsub = function (ev, func) {\r\n\tif (this.events[ev])\r\n\t\tthis.events[ev] = this.events[ev].filter(fu => fu !== func)\r\n}\r\nTouch.prototype.clearEvlent = function (ev) {\r\n\tif (this.events[ev]) this.events[ev] = []\r\n}\r\nTouch.prototype.clear = function () {\r\n\tthis.events = {\r\n\t\tup: [],\r\n\t\tdown: [],\r\n\t\tleft: [],\r\n\t\tright: [],\r\n\t\tstop: [],\r\n\t\tstart: [],\r\n\t\tclick: [],\r\n\t\tforce: [],\r\n\t\tbmiddle: [],\r\n\t\tbright: [],\r\n\t}\r\n}\r\nTouch.prototype.triger = function (ev, args) {\r\n\tif (this.events[ev])\r\n\t\tthis.events[ev].forEach(func => {\r\n\t\t\ttry {\r\n\t\t\t\tfunc(args)\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tif (this.console_error) console.log(e)\r\n\t\t\t\tthis.last_error = 'Error: ' + e.name +\r\n\t\t\t\t\t' ' + e.foo +\r\n\t\t\t\t\t' ' + e.message +\r\n\t\t\t\t\t' ' + e.stack\r\n\t\t\t\tif (this.throw_error) throw e\r\n\t\t\t}\r\n\t\t})\r\n}\r\n\r\nexport default Touch","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.js\";\n};","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.v = (exports, wasmModuleId, wasmModuleHash, importsObj) => {\n\tvar req = fetch(__webpack_require__.p + \"\" + wasmModuleHash + \".module.wasm\");\n\tif (typeof WebAssembly.instantiateStreaming === 'function') {\n\t\treturn WebAssembly.instantiateStreaming(req, importsObj)\n\t\t\t.then((res) => (Object.assign(exports, res.instance.exports)));\n\t}\n\treturn req\n\t\t.then((x) => (x.arrayBuffer()))\n\t\t.then((bytes) => (WebAssembly.instantiate(bytes, importsObj)))\n\t\t.then((res) => (Object.assign(exports, res.instance.exports)));\n};","__webpack_require__.p = \"build/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkstellar2\"] = self[\"webpackChunkstellar2\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","function Vector(...array) {\n\tArray.call(this)\n\tif (array.length == 1) {\n\t\tvar item = array[0]\n\t\tvar arr = Object.values(item)\n\t\tif (Object.hasOwnProperty.call(item, 'length') &&\n\t\t\titem.length !== arr.length) {\n\t\t\tarr.pop()\n\t\t}\n\t\tthis.push(...arr)\n\t} else {\n\t\tthis.push(...Object.values(array))\n\t}\n\n\tObject.defineProperty(this, 'x', {\n\t\tget() {\n\t\t\treturn this[0];\n\t\t},\n\t\tset(value) {\n\t\t\tthis[0] = value;\n\t\t}\n\t});\n\tObject.defineProperty(this, 'y', {\n\t\tget() {\n\t\t\treturn this[1];\n\t\t},\n\t\tset(value) {\n\t\t\tthis[1] = value;\n\t\t}\n\t});\n\tObject.defineProperty(this, 'z', {\n\t\tget() {\n\t\t\treturn this[2];\n\t\t},\n\t\tset(value) {\n\t\t\tthis[2] = value;\n\t\t}\n\t});\n}\n\nVector.prototype.x = 0;\nVector.prototype.y = 0;\nVector.prototype.z = 0;\n\nVector.prototype = Object.create(Array.prototype, {\n\tconstructor: {\n\t\tvalue: Vector,\n\t\tenumerable: false, // Make it non-enumerable, so it won't appear in `for...in` loop\n\t\twritable: true,\n\t\tconfigurable: true,\n\t}\n})\n\nVector.prototype.add = function (toAdd) {\n\tlet ret = this.copy()\n\tfor (var k = 0; k < ret.length; k++) {\n\t\tif (!Object.hasOwnProperty.call(ret, k)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (!Object.hasOwnProperty.call(toAdd, k)) {\n\t\t\tcontinue;\n\t\t}\n\t\tret[k] += toAdd[k]\n\t}\n\treturn ret\n}\n\nVector.prototype.update = function (newValues) {\n\tfor (var k = 0; k < this.length; k++) {\n\t\tif (!Object.hasOwnProperty.call(this, k)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (!Object.hasOwnProperty.call(newValues, k)) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis[k] = newValues[k]\n\t}\n}\n\nVector.prototype.negate = function () {\n\tlet ret = this.copy()\n\tfor (var k = 0; k < ret.length; k++) {\n\t\tif (!Object.hasOwnProperty.call(ret, k)) {\n\t\t\tcontinue;\n\t\t}\n\t\tret[k] = -ret[k]\n\t}\n\treturn ret\n}\nVector.prototype.substract = function (toAdd) {\n\treturn this.add(toAdd.negate())\n}\nVector.prototype.magnitude = function () {\n\tlet magnitude = 0;\n\tfor (var k = 0; k < this.length; k++) {\n\t\tif (!Object.hasOwnProperty.call(this, k)) {\n\t\t\tcontinue;\n\t\t}\n\t\tmagnitude += this[k] * this[k]\n\t}\n\treturn Math.sqrt(magnitude);\n}\nVector.prototype.normalise = function (toAdd) {\n\tlet magnitude = this.magnitude()\n\treturn this.scale(1 / magnitude)\n}\nVector.prototype.scale = function (scale) {\n\tlet ret = this.copy()\n\tfor (var k = 0; k < ret.length; k++) {\n\t\tif (!Object.hasOwnProperty.call(ret, k)) {\n\t\t\tcontinue;\n\t\t}\n\t\tret[k] *= scale\n\t}\n\treturn ret\n}\n\nVector.prototype.copy = function () {\n\treturn new this.constructor(this)\n}\n\nexport { Vector }","import { Vector } from \"../../shapes/vector\"\r\n\r\nfunction Transform(positions) {\r\n\tthis.positions = new Vector(positions)\r\n}\r\n\r\nexport { Transform }","import { Vector } from '../../shapes/vector'\r\nimport { Transform } from './transform'\r\nfunction Physics(speeds, mass, drag) {\r\n\tthis.speeds = new Vector(speeds)\r\n\tthis.mass = mass\r\n\tthis.drag = isNaN(drag) ? 0.001 : drag\r\n\tthis.maxSpeed = 100\r\n}\r\n\r\n\r\nPhysics.prototype.applyForce = function (force) {\r\n\tfor (var i = 0; i < this.speeds.length; i++) {\r\n\t\tif (isNaN(force[i])) throw new Error(\"Physics.prototype.applyForce got NnN\")\r\n\t\tthis.speeds[i] += force[i] / this.mass\r\n\t}\r\n}\r\n\r\nPhysics.prototype.applyAsc = function (asc) {\r\n\tfor (var i = 0; i < this.speeds.length; i++) {\r\n\t\tif (isNaN(asc[i])) throw new Error(\"Physics.prototype.applyAsc got NnN\")\r\n\t\tthis.speeds[i] += asc[i]\r\n\t}\r\n}\r\n\r\nPhysics.prototype.compute = function () {\r\n\tvar speedValue = 0\r\n\tvar i\r\n\tfor (i = 0; i < this.speeds.length; i++) {\r\n\t\tspeedValue += this.speeds[i] * this.speeds[i]\r\n\t}\r\n\r\n\tvar speedMultipliyer = Math.min(1 - this.drag, this.maxSpeed / speedValue)\r\n\r\n\tfor (i = 0; i < this.speeds.length; i++) {\r\n\t\tthis.speeds[i] *= speedMultipliyer\r\n\t}\r\n}\r\n\r\nfunction PhysicsEngine(manager, engines) {\r\n\tthis.manager = manager\r\n\tthis.engines = engines\r\n}\r\n\r\nPhysicsEngine.prototype.compute = function () {\r\n\tthis.engines.forEach(engine => engine.compute())\r\n\tthis.manager.getEnities(Physics).forEach(elem => {\r\n\t\tvar physics = this.manager.get(Physics, elem)[0]\r\n\t\tphysics.compute()\r\n\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\ttransform.positions = transform.positions.add(physics.speeds)\r\n\t})\r\n}\r\n\r\nexport { PhysicsEngine, Physics }","function ShapeCircle(radius){\r\n\tthis.radius = radius\r\n}\r\n\r\nexport { ShapeCircle }","import { ShapeCircle } from '../../shapes/circle.js'\r\nimport { Physics } from './physics.js'\r\nimport { Transform } from './transform.js'\r\n\r\n\r\nfunction PlasticBody() { }\r\n\r\nfunction PlasticColisionEngine(manager) {\r\n\tthis.manager = manager\r\n\tthis.physic_entity = null\r\n}\r\n\r\nfunction squareDistance(nodeA, nodeB) {\r\n\tvar square = 0\r\n\tfor (var i = 0; i < nodeA.positions.length; i++)\r\n\t\tsquare += Math.pow((nodeA.positions[i] - nodeB.positions[i]), 2)\r\n\treturn square\r\n}\r\n\r\nfunction computeColision(\r\n\tcompute,\r\n\tnaibors\r\n) {\r\n\tvar collisions = []\r\n\tnaibors.forEach(element => {\r\n\t\tif (element == compute) return\r\n\t\tvar distanceX = (element.positions[0] - compute.positions[0])\r\n\t\tvar distanceY = (element.positions[1] - compute.positions[1])\r\n\t\tvar centerDistance = compute.radius + element.radius\r\n\t\tif (Math.abs(distanceX) > centerDistance || Math.abs(distanceY) > centerDistance)\r\n\t\t\treturn\r\n\r\n\t\tvar distance2 = squareDistance(compute, element)\r\n\t\tif (distance2 > Math.pow(centerDistance, 2))\r\n\t\t\treturn\r\n\t\tif (compute.radius > element.radius)\r\n\t\t\tcollisions.push(element)\r\n\t})\r\n\treturn collisions\r\n}\r\n\r\nPlasticColisionEngine.prototype.compute = function () {\r\n\r\n\tvar physic_entity = this.manager.getEnities(Physics).filter(elem =>\r\n\t\tthis.manager.get(PlasticBody, elem)[0]\r\n\t).map((elem) => {\r\n\t\tvar circle = this.manager.get(ShapeCircle, elem)[0]\r\n\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\tvar physics = this.manager.get(Physics, elem)[0]\r\n\t\treturn {\r\n\t\t\te: elem,\r\n\t\t\tradius: circle.radius,\r\n\t\t\tcircle,\r\n\t\t\tpositions: transform.positions,\r\n\t\t\tspeeds: physics.speeds,\r\n\t\t\tphysics\r\n\t\t}\r\n\t})\r\n\r\n\tfor (var i = 0; i < physic_entity.length; i++) {\r\n\r\n\t\tvar elem = physic_entity[i]\r\n\t\tif (!this.manager.alive(elem.e))\r\n\t\t\tcontinue\r\n\t\tvar colisions = computeColision(\r\n\t\t\telem,\r\n\t\t\tphysic_entity)\r\n\t\tfor (var collisionIndex in colisions) {\r\n\t\t\tvar collision = colisions[collisionIndex]\r\n\t\t\tif (!this.manager.alive(collision.e))\r\n\t\t\t\tcontinue\r\n\t\t\tthis.manager.destroy(collision.e)\r\n\t\t\tthis.merge(elem, collision)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nPlasticColisionEngine.prototype.merge = function (nodeA, nodeB) {\r\n\tvar cubeRadiusA = Math.pow(nodeA.radius, 3);\r\n\tvar cubeRadiusB = Math.pow(nodeB.radius, 3);\r\n\tvar newRadious = Math.cbrt(cubeRadiusA + cubeRadiusB);\r\n\r\n\tnodeA.circle.radius = newRadious\r\n\tvar massA = nodeA.physics.mass\r\n\tvar massB = nodeB.physics.mass\r\n\tnodeA.physics.mass = massA + massB\r\n\r\n\tfor (var i = 0; i < nodeA.speeds.length; i++) {\r\n\t\tnodeA.speeds[i] = (nodeA.speeds[i] * massA + nodeB.speeds[i] * massB) / (massA + massB)\r\n\t}\r\n}\r\n\r\nexport {\r\n\tPlasticColisionEngine,\r\n\tPlasticBody\r\n}","import { Physics } from './physics.js'\r\nimport { Transform } from './transform.js'\r\n\r\nfunction GravityEngine(manager, interaction) {\r\n\tthis.manager = manager\r\n\tthis.interaction = interaction ? interaction : 0.1\r\n}\r\n\r\nfunction computeAttraction(\r\n\tcompute,\r\n\tnaibors,\r\n\tinteraction\r\n) {\r\n\tvar ret = [0, 0]\r\n\tnaibors.forEach(element => {\r\n\t\tif (element == compute) return\r\n\t\tvar distanceX = (element.positions[0] - compute.positions[0])\r\n\t\tvar distanceY = (element.positions[1] - compute.positions[1])\r\n\r\n\t\tvar distance2 = distanceX * distanceX + distanceY * distanceY\r\n\t\tvar distance = Math.sqrt(distance2)\r\n\r\n\t\tvar ascIntencity = element.mass / distance2 * interaction\r\n\t\tret[0] += distanceX / distance * ascIntencity\r\n\t\tret[1] += distanceY / distance * ascIntencity\r\n\t})\r\n\treturn ret\r\n}\r\n\r\nGravityEngine.prototype.compute = function () {\r\n\r\n\tvar physic_entity = this.manager.getEnities(Physics)\r\n\t\t.map((elem) => {\r\n\t\t\tvar physics = this.manager.get(Physics, elem)[0]\r\n\t\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\t\treturn {\r\n\t\t\t\te: elem,\r\n\t\t\t\tmass: physics.mass,\r\n\t\t\t\tphysics,\r\n\t\t\t\tpositions: transform.positions\r\n\t\t\t}\r\n\t\t})\r\n\r\n\tfor (var i = 0; i < physic_entity.length; i++) {\r\n\t\tvar elem = physic_entity[i]\r\n\t\tvar asc = computeAttraction(\r\n\t\t\telem,\r\n\t\t\tphysic_entity, this.interaction)\r\n\t\telem.physics.applyAsc(asc)\r\n\t}\r\n}\r\n\r\nexport {\r\n\tGravityEngine\r\n}","function ShapeBox(size_x, size_y) {\n\tthis.x = size_x;\n\tthis.y = size_y;\n}\n\nexport { ShapeBox }","function ShapeText(font, text){\n\tthis.font = font;\n\tthis.text = text;\n}\n\nexport { ShapeText }","function Sprite(image) {\n\tthis.image = image\n}\n\nexport { Sprite }","function ShapeRounded(radius) {\n\tthis.radius = radius;\n}\n\nexport { ShapeRounded }","import { Vector } from \"../../shapes/vector\"\r\n\r\nfunction TransformRotate(rotate) {\r\n\tthis.rotate = rotate\r\n}\r\nexport { TransformRotate }","function ShapeNoScale() {\n    this.noscale = true\n}\n\nexport { ShapeNoScale }","function ShapeScale(scale) {\n    this.scale = scale\n}\n\nexport { ShapeScale }","import { Transform } from '../physics/transform.js'\r\nimport { ShapeBox } from '../../shapes/box.js'\r\nimport { ShapeCircle } from '../../shapes/circle.js'\r\nimport { ShapeText } from '../../shapes/text.js'\r\nimport { Sprite } from '../../shapes/sprite.js'\r\nimport { ShapeRounded } from '../../shapes/rounded-box.js'\r\nimport { TransformRotate } from '../physics/transformRotate.js'\r\nimport { ShapeNoScale } from '../../shapes/noScale.js'\r\nimport { ShapeScale } from '../../shapes/scale.js'\r\n\r\nfunction Renderer(color, stroke, layer) {\r\n\tthis.color = color\r\n\tthis.stroke = stroke\r\n\tthis.layer = layer || 0\r\n}\r\n\r\nfunction RenderEngine(context, manager) {\r\n\tthis.context = context\r\n\tthis.manager = manager\r\n\tthis.maxSize = 100\r\n}\r\n\r\nfunction shapeDone(context, renderer) {\r\n\tif (renderer.color) {\r\n\t\tcontext.fillStyle = renderer.color;\r\n\t\tcontext.fill()\r\n\t}\r\n\tif (renderer.stroke) {\r\n\t\tcontext.strokeStyle = renderer.stroke.color;\r\n\t\tcontext.lineWidth = renderer.stroke.width;\r\n\t\tcontext.stroke()\r\n\t}\r\n}\r\n\r\nfunction roundedRect(context, x, y, width, height, radius) {\r\n\tcontext.moveTo(x, y + radius);\r\n\tcontext.lineTo(x, y + height - radius);\r\n\tcontext.arcTo(x, y + height, x + radius, y + height, radius);\r\n\tcontext.lineTo(x + width - radius, y + height);\r\n\tcontext.arcTo(x + width, y + height, x + width, y + height - radius, radius);\r\n\tcontext.lineTo(x + width, y + radius);\r\n\tcontext.arcTo(x + width, y, x + width - radius, y, radius);\r\n\tcontext.lineTo(x + radius, y);\r\n\tcontext.arcTo(x, y, x, y + radius, radius);\r\n}\r\n\r\nRenderEngine.prototype.draw = function (view) {\r\n\tconst { context } = this\r\n\tvar canvasWidth = context.canvas.clientWidth\r\n\tvar canvasHeight = context.canvas.clientHeight\r\n\tconst { x: centerX, y: centerY, scale, angle } = view\r\n\tconst canvasWidthHalf = canvasWidth / 2\r\n\tconst canvasHeightHalf = canvasHeight / 2\r\n\tconst maxSize = this.maxSize * scale;\r\n\tif (angle) {\r\n\t\tcontext.save();\r\n\t\tcontext.translate(canvasWidthHalf, canvasHeightHalf);\r\n\t\tcontext.rotate(angle);\r\n\t\tcontext.translate(-canvasWidthHalf, -canvasHeightHalf);\r\n\t}\r\n\tthis.manager.getEnities(Renderer).map(elem => {\r\n\t\tvar renderer = this.manager.get(Renderer, elem)[0]\r\n\t\treturn [elem, renderer]\r\n\t}).sort(([, a], [, b]) => {\r\n\t\tif (a.layer < b.layer) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (a.layer > b.layer) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\t// a must be equal to b\r\n\t\treturn 0;\r\n\t}\r\n\t).map(\r\n\t\t([elem, renderer]) => {\r\n\t\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\t\tvar x = (transform.positions[0] - centerX) * scale + canvasWidthHalf\r\n\t\t\tvar y = (transform.positions[1] - centerY) * scale + canvasHeightHalf\r\n\t\t\tif (x < -maxSize || y < -maxSize || x > canvasWidth || y > canvasHeight)\r\n\t\t\t\treturn\r\n\r\n\t\t\tlet fixed = this.manager.get(ShapeNoScale, elem)[0]\r\n\t\t\tlet selfScale = this.manager.get(ShapeScale, elem)[0]\r\n\t\t\tlet scaleWith = fixed ? 1 : scale * (selfScale?.scale || 1)\r\n\r\n\t\t\tlet circles = this.manager.get(ShapeCircle, elem)\r\n\t\t\tfor (let i in circles) {\r\n\t\t\t\tlet circle = circles[i];\r\n\t\t\t\tconst elementSize = circle.radius * scaleWith > 1 ? circle.radius * scaleWith : 1\r\n\t\t\t\tcontext.beginPath()\r\n\t\t\t\tcontext.arc(x, y, elementSize, 0, 2 * Math.PI, false)\r\n\t\t\t\tshapeDone(context, renderer);\r\n\t\t\t}\r\n\t\t\tlet boxes = this.manager.get(ShapeBox, elem)\r\n\t\t\tlet rounded = this.manager.get(ShapeRounded, elem)\r\n\t\t\tlet rotate = this.manager.get(TransformRotate, elem)[0]\r\n\t\t\tfor (let i in boxes) {\r\n\t\t\t\tlet box = boxes[i];\r\n\t\t\t\tconst size_x = box.x * scaleWith > 1 ? box.x * scaleWith : 1\r\n\t\t\t\tconst size_y = box.y * scaleWith > 1 ? box.y * scaleWith : 1\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tif (rotate) {\r\n\t\t\t\t\tcontext.translate(x + size_x / 2, y + size_y / 2);\r\n\t\t\t\t\tcontext.rotate(rotate.rotate);\r\n\t\t\t\t\tcontext.translate(-x - size_x / 2, -y - size_y / 2);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tif (rounded[0]) {\r\n\t\t\t\t\troundedRect(context, x, y, size_x, size_y, rounded[0].radius)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcontext.rect(x, y, size_x, size_y);\r\n\t\t\t\t}\r\n\t\t\t\tshapeDone(context, renderer);\r\n\t\t\t\tcontext.restore();\r\n\t\t\t}\r\n\t\t\tlet sprites = this.manager.get(Sprite, elem)\r\n\t\t\tfor (let i in sprites) {\r\n\t\t\t\tlet sprite = sprites[i];\r\n\t\t\t\tlet box = boxes[0];\r\n\t\t\t\tlet spriteWith = box?.x || sprite.image.width\r\n\t\t\t\tlet spriteHeight = box?.x || sprite.image.height\r\n\t\t\t\tconst size_x = spriteWith * scaleWith > 1 ? spriteWith * scaleWith + 0.5 : 1\r\n\t\t\t\tconst size_y = spriteHeight * scaleWith > 1 ? spriteHeight * scaleWith + 0.5 : 1\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tif (rotate) {\r\n\t\t\t\t\tcontext.translate(x + size_x / 2, y + size_y / 2);\r\n\t\t\t\t\tcontext.rotate(rotate.rotate);\r\n\t\t\t\t\tcontext.translate(-x - size_x / 2, -y - size_y / 2);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.drawImage(sprite.image, x, y, size_x, size_y);\r\n\t\t\t\tcontext.restore();\r\n\t\t\t}\r\n\t\t\tlet texts = this.manager.get(ShapeText, elem)\r\n\t\t\tfor (let i in texts) {\r\n\t\t\t\tlet text = texts[i]\r\n\t\t\t\tconst size_y = text.font * scaleWith > 1 ? text.font * scaleWith : 1\r\n\t\t\t\tcontext.fillStyle = renderer.color;\r\n\t\t\t\tcontext.font = parseInt(size_y) + 'px serif';\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tif (rotate) {\r\n\t\t\t\t\tcontext.translate(x, y);\r\n\t\t\t\t\tcontext.rotate(rotate.rotate);\r\n\t\t\t\t\tcontext.translate(-x, -y);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.fillText(text.text, x, y + parseInt(size_y));\r\n\t\t\t\tcontext.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n\tif (angle) {\r\n\t\tcontext.restore()\r\n\t}\r\n}\r\nRenderEngine.prototype.mesure = function (text) {\r\n\tconst { context } = this\r\n\tcontext.font = parseInt(text.font) + 'px serif';\r\n\treturn context.measureText(text.text);\r\n}\r\nexport { RenderEngine, Renderer }\r\n","import { Renderer } from '../../lib/ecs/drawers/render.js'\r\nimport { ShapeCircle } from '../../lib/shapes/circle.js'\r\nimport { Physics } from '../../lib/ecs/physics/physics.js'\r\n\r\nfunction GravityColorEngine(manager) {\r\n\tthis.manager = manager\r\n}\r\n\r\nconst planetColors = [\r\n\t[245, 202, 117],\r\n\t[254, 255, 188],\r\n\t[200, 141, 110],\r\n]\r\n\r\nGravityColorEngine.prototype.compute = function () {\r\n\tthis.manager.getEnities(Renderer).map(\r\n\t\t(elem) => {\r\n\t\t\tvar renderers = this.manager.get(Renderer, elem)[0]\r\n\t\t\tvar mass = this.manager.get(Physics, elem)[0].mass\r\n\t\t\tvar volume = Math.pow(this.manager.get(ShapeCircle, elem)[0].radius, 3) * Math.PI\r\n\t\t\tvar dencity = mass / volume * planetColors.length * 3\r\n\t\t\tvar index = Math.min(Math.round(dencity), planetColors.length - 1);\r\n\t\t\trenderers.color = '#' + toHex(planetColors[index][0]) +\r\n\t\t\t\ttoHex(planetColors[index][1]) +\r\n\t\t\t\ttoHex(planetColors[index][2])\r\n\t\t}\r\n\t)\r\n}\r\nfunction toHex(num) {\r\n\tlet out = num.toString(16)\r\n\treturn out.length - 1 ? out : '0' + out\r\n}\r\nexport { GravityColorEngine }\r\n","export function worldToScreen(\n    viewCenterX,\n    viewCenterY,\n    viewScale,\n    screenW,\n    screenH,\n    pointX,\n    pointY) {\n    const widthHalf = screenW / 2\n    const heightHalf = screenH / 2\n    var screenX = (pointX - viewCenterX) * viewScale + widthHalf\n    var screenY = (pointY - viewCenterY) * viewScale + heightHalf\n    return [screenX, screenY]\n}\n\nexport function screenToWorld(\n    viewCenterX,\n    viewCenterY,\n    viewScale,\n    screenW,\n    screenH,\n    pointX,\n    pointY) {\n    const widthHalf = screenW / 2\n    const heightHalf = screenH / 2\n    var worldX = (pointX - widthHalf) / viewScale + viewCenterX\n    var worldY = (pointY - heightHalf) / viewScale + viewCenterY\n    return [worldX, worldY]\n}","import { screenToWorld, worldToScreen } from \"../../math/view\"\r\n\r\nfunction Ploter(canvas) {\r\n\tthis.canvas = canvas\r\n\tthis.context = this.canvas.getContext('2d', { willReadFrequently: true })\r\n\tthis.img = this.context.createImageData(this.canvas.width, this.canvas.height)\r\n}\r\n\r\nPloter.prototype.clear = function () {\r\n\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n}\r\n\r\nPloter.prototype.getCanvas = function () {\r\n\treturn this.canvas\r\n}\r\n\r\nPloter.prototype.worldToScreen = function (view, point) {\r\n\tconst { width: canvasWidth, height: canvasHeight } = this.canvas\r\n\tconst { x: centerX, y: centerY, scale } = view\r\n\treturn worldToScreen(\r\n\t\tcenterX,\r\n\t\tcenterY,\r\n\t\tscale,\r\n\t\tcanvasWidth,\r\n\t\tcanvasHeight,\r\n\t\tpoint[0],\r\n\t\tpoint[1]\r\n\t)\r\n}\r\n\r\nPloter.prototype.screenToWorld = function (view, point) {\r\n\tconst { width: canvasWidth, height: canvasHeight } = this.canvas\r\n\tconst { x: centerX, y: centerY, scale } = view\r\n\treturn screenToWorld(\r\n\t\tcenterX,\r\n\t\tcenterY,\r\n\t\tscale,\r\n\t\tcanvasWidth,\r\n\t\tcanvasHeight,\r\n\t\tpoint[0],\r\n\t\tpoint[1]\r\n\t)\r\n}\r\n\r\nexport default Ploter","function FPSPloter(context) {\r\n\tthis.context = context\r\n\tthis.time = (new Date()).getTime()\r\n\tthis.i = 0\r\n\tthis.fps = 0\r\n}\r\n\r\nFPSPloter.prototype.draw = function () {\r\n\tthis.i++\r\n\tvar newTime = (new Date()).getTime()\r\n\tvar deltaT = newTime - this.time\r\n\tthis.time = newTime\r\n\tthis.context.font = '14px Verdana'\r\n\r\n\tif (!(this.i % 30)) this.fps = (Math.round(10000 / deltaT) / 10) + ' fps'\r\n\tthis.context.beginPath();\r\n\tthis.context.rect(10, 13, 60, 14);\r\n\tthis.context.fillStyle = 'gray'\r\n\tthis.context.fill();\r\n\tthis.context.fillStyle = 'red'\r\n\tthis.context.fillText(this.fps, 10, 24)\r\n\r\n}\r\n\r\nexport default FPSPloter","function sign(p1, p2, p3) {\n    return (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);\n}\n\nfunction pointInTriangle(pt, v1, v2, v3) {\n    var b1 = sign(pt, v1, v2) < 0.0;\n    var b2 = sign(pt, v2, v3) < 0.0;\n    var b3 = sign(pt, v3, v1) < 0.0;\n\n    return ((b1 == b2) && (b2 == b3));\n}\n\nfunction dot(a, b) { return (a.x * b.x) + (a.y * b.y); }\n\nfunction perpDot(a, b) { return (a.y * b.x) - (a.x * b.y); }\n\nfunction lineCollision(A1, A2,\n    B1, B2) {\n    var a = { x: A2.x - A1.x, y: A2.y - A1.y };\n    var b = { x: B2.x - B1.x, y: B2.y - B1.y };\n\n    var f = perpDot(a, b);\n    if (!f)      // lines are parallel\n        return false;\n\n    var c = { x: B2.x - A2.x, y: B2.y - A2.y };\n    var aa = perpDot(a, c);\n    var bb = perpDot(b, c);\n\n    if (f < 0) {\n        if (aa > 0) return false;\n        if (bb > 0) return false;\n        if (aa < f) return false;\n        if (bb < f) return false;\n    }\n    else {\n        if (aa < 0) return false;\n        if (bb < 0) return false;\n        if (aa > f) return false;\n        if (bb > f) return false;\n    }\n    return true;\n}\n\nfunction interpolateVecs(vecA, vecB, over) {\n    let left = 1 - over\n    return { x: vecA.x * left + vecB.x * over, y: vecA.y * left + vecB.y * over }\n}\nfunction interpolate(vecA, vecB, over) {\n    let left = 1 - over\n    return vecA * left + vecB * over\n}\nfunction magnitude(aX, aY) {\n    return Math.sqrt(aX * aX, aY * aY)\n}\n\nfunction distance(aX, aY, bX, bY) {\n    return magnitude(aX - bX, aY - bY)\n}\n\nexport {\n    pointInTriangle,\n    dot,\n    perpDot,\n    lineCollision,\n    sign,\n    interpolateVecs,\n    interpolate,\n    distance,\n    magnitude\n}","import { screenToWorld, worldToScreen } from \"../../math/view\"\r\nimport { interpolate } from \"../../math/vec\"\r\n\r\nfunction GridPloter(ctx, options) {\r\n\tthis.context = ctx\r\n\tthis.showCords = options?.showCords\r\n\tthis.showAxis = options?.showAxis\r\n\tthis.axisCords = options?.axisCords\r\n\tthis.axisScale = options?.axisScale || 100\r\n\tthis.devide = options?.devide || 2\r\n}\r\n\r\nGridPloter.prototype.draw = function (sizex, sizey, view) {\r\n\tconst { context } = this\r\n\tvar canvasWidth = context.canvas.clientWidth\r\n\tvar canvasHeight = context.canvas.clientHeight\r\n\tconst { x: centerX, y: centerY, scale } = view\r\n\tconst canvasWidthHalf = canvasWidth / 2\r\n\tconst canvasHeightHalf = canvasHeight / 2\r\n\tvar gridScale = scale || 1\r\n\twhile (gridScale > 2)\r\n\t\tgridScale /= 2\r\n\twhile (gridScale < 1)\r\n\t\tgridScale *= 2\r\n\tconst stepX = sizex * gridScale\r\n\tconst stepY = sizey * gridScale\r\n\tvar startx = (canvasWidthHalf - centerX * scale) % stepX\r\n\tvar starty = (canvasHeightHalf - centerY * scale) % stepY\r\n\tif (startx < 0) {\r\n\t\tstartx += stepX\r\n\t}\r\n\tif (starty < 0) {\r\n\t\tstarty += stepY\r\n\t}\r\n\tif (this.showAxis) {\r\n\t\tcontext.beginPath()\r\n\t\tlet [scrCenterX, scrCenterY] = worldToScreen(\r\n\t\t\tcenterX,\r\n\t\t\tcenterY,\r\n\t\t\tscale,\r\n\t\t\tcanvasWidth,\r\n\t\t\tcanvasHeight,\r\n\t\t\t0, 0)\r\n\t\tcontext.lineWidth = 2\r\n\t\tcontext.moveTo(scrCenterX, 0)\r\n\t\tcontext.lineTo(scrCenterX, canvasHeight)\r\n\t\tcontext.moveTo(0, scrCenterY)\r\n\t\tcontext.lineTo(canvasWidth, scrCenterY)\r\n\t\tcontext.strokeStyle = 'rgba(0, 0, 0, 1.0)'\r\n\t\tcontext.stroke()\r\n\t}\r\n\r\n\tcontext.beginPath()\r\n\tfor (var x = startx; x <= canvasWidth; x += stepX) {\r\n\t\tcontext.moveTo(x, 0)\r\n\t\tcontext.lineTo(x, canvasHeight)\r\n\t\tif (!this.axisCords) continue;\r\n\t\tlet cordX = screenToWorld(\r\n\t\t\tcenterX,\r\n\t\t\tcenterY,\r\n\t\t\tscale,\r\n\t\t\tcanvasWidth,\r\n\t\t\tcanvasHeight,\r\n\t\t\tx,\r\n\t\t\t0\r\n\t\t)[0]\r\n\t\tthis.drawCod(cordX, 0, view, context)\r\n\t}\r\n\r\n\tfor (var y = starty; y <= canvasHeight; y += stepY) {\r\n\t\tcontext.moveTo(0, y)\r\n\t\tcontext.lineTo(canvasWidth, y)\r\n\t\tif (!this.axisCords) continue;\r\n\t\tlet cordY = screenToWorld(\r\n\t\t\tcenterX,\r\n\t\t\tcenterY,\r\n\t\t\tscale,\r\n\t\t\tcanvasWidth,\r\n\t\t\tcanvasHeight,\r\n\t\t\t0,\r\n\t\t\ty\r\n\t\t)[1]\r\n\t\tthis.drawCod(0, cordY, view, context)\r\n\t}\r\n\tcontext.lineWidth = 2\r\n\tcontext.strokeStyle = 'rgba(128, 128, 128, 0.5)'\r\n\tcontext.stroke()\r\n\tfor (var i = 0; i < this.devide - 1; i++) {\r\n\t\tvar startx = (startx + stepX / this.devide) % stepX\r\n\t\tvar starty = (starty + stepY / this.devide) % stepY\r\n\r\n\t\tcontext.beginPath()\r\n\t\tfor (var x = startx; x <= canvasWidth; x += stepX) {\r\n\t\t\tcontext.moveTo(x, 0)\r\n\t\t\tcontext.lineTo(x, canvasHeight)\r\n\t\t}\r\n\r\n\t\tfor (var y = starty; y <= canvasHeight; y += stepY) {\r\n\t\t\tcontext.moveTo(0, y)\r\n\t\t\tcontext.lineTo(canvasWidth, y)\r\n\t\t}\r\n\t\tcontext.lineWidth = 1\r\n\t\tcontext.strokeStyle = 'rgba(128, 128, 128, ' + interpolate(0.25, 0.5, gridScale - 1) + ')'\r\n\t\tcontext.stroke()\r\n\t}\r\n\tif (this.showCords) {\r\n\t\tcontext.font = '10px Arial'\r\n\t\tcontext.fillText(\r\n\t\t\t(Math.round(view.x * this.axisScale) / this.axisScale + Number.EPSILON) +\r\n\t\t\t',' + (Math.round(view.y * this.axisScale + Number.EPSILON) / this.axisScale) +\r\n\t\t\t',' + (Math.round(view.scale * this.axisScale + Number.EPSILON) / this.axisScale), 10, 50)\r\n\t}\r\n}\r\n\r\n\r\nGridPloter.prototype.drawCod = function (eX, eY, view, context) {\r\n\tconst { x: centerX, y: centerY, scale } = view\r\n\tvar canvasWidth = context.canvas.clientWidth\r\n\tvar canvasHeight = context.canvas.clientHeight\r\n\tconst canvasWidthHalf = canvasWidth / 2\r\n\tconst canvasHeightHalf = canvasHeight / 2\r\n\tvar x = (eX - centerX) * scale + canvasWidthHalf\r\n\tvar y = (eY - centerY) * scale + canvasHeightHalf\r\n\tlet outOfScreen = false\r\n\tif (x < 5 ||\r\n\t\tx > canvasWidth - 19 ||\r\n\t\ty > canvasHeight - 28 ||\r\n\t\ty < 14) {\r\n\t\toutOfScreen = true\r\n\t}\r\n\r\n\r\n\tif (x < 5) {\r\n\t\tx = 5\r\n\t}\r\n\tif (y < 14) {\r\n\t\ty = 14\r\n\t}\r\n\tif (x > canvasWidth - 19) {\r\n\t\tx = canvasWidth - 19\r\n\t}\r\n\tif (y > canvasHeight - 28) {\r\n\t\ty = canvasHeight - 28\r\n\t}\r\n\tcontext.font = '14px Verdana'\r\n\tcontext.fillStyle = 'rgb(0, 0, 0, 1.0)'\r\n\tfunction trimNum(value) {\r\n\t\treturn +parseFloat(value).toFixed(2)\r\n\t}\r\n\r\n\tlet text = \"\"\r\n\tlet ext = trimNum((eX / this.axisScale))\r\n\tlet eyt = trimNum((-eY / this.axisScale))\r\n\tif (ext) {\r\n\t\ttext += ext\r\n\t}\r\n\tif (eyt) {\r\n\t\ttext += eyt\r\n\t}\r\n\tif (!eyt && !ext && !outOfScreen) {\r\n\t\ttext += \"0\"\r\n\t}\r\n\r\n\tcontext.fillText(text, x + 5, y + 14)\r\n}\r\n\r\nGridPloter.prototype.line = function (startx, starty, sizex, sizey, color) {\r\n\tthis.context.lineWidth = 1\r\n\tthis.context.moveTo(startx, starty)\r\n\tthis.context.lineTo(startx + sizex, starty + sizey)\r\n\tthis.context.strokeStyle = color\r\n\tthis.context.stroke()\r\n}\r\n\r\nexport default GridPloter","import { interpolate } from '../../math/vec.js'\n\nconst distance = (point, pointB) => {\n    var square = 0\n    for (var i = 0; i < point.length; i++)\n        square += (point[i] - pointB[i]) * (point[i] - pointB[i])\n    return isNaN(square) || square < 1 ? 1 : Math.sqrt(square)\n}\n\nexport function ImageDataPloter(context, manager) {\n    this.context = context\n    this.update();\n    this.manager = manager\n}\n\nImageDataPloter.prototype.update = function () {\n    this.width = this.context.canvas.clientWidth\n    this.height = this.context.canvas.clientHeight\n    this.img = this.context.createImageData(this.width, this.height)\n}\nImageDataPloter.prototype.pull = function () {\n    this.img = this.context.getImageData(0, 0,\n        this.width, this.height)\n}\n\nImageDataPloter.prototype.imgRect = function (x, y, width, height, color) {\n    if (color[3] == undefined) {\n        color.push(Math.min(distance(color, [0, 0, 0]) * 2, 255))\n    }\n\n    const realWidth = Math.max(Math.min(width, this.width - x), 0)\n    const realHeight = Math.max(Math.min(height, this.height - y), 0)\n    const realX = Math.max(Math.round(x), 0)\n    const realY = Math.max(Math.round(y), 0)\n    const data = this.img.data\n    const startX = realX * 4\n    const endX = realWidth * 4 + startX\n    const rowLength = this.width * 4\n    const startY = realY * rowLength\n    const endY = realHeight * rowLength + startY\n    const over = color[3] / 255\n    for (var i = startY; i < endY; i += rowLength) {\n        for (var j = startX; j < endX; j += 4) {\n            var ij = i + j\n            data[ij] = interpolate(data[ij], color[0], over)\n            data[ij + 1] = interpolate(data[ij + 1], color[1], over)\n            data[ij + 2] = interpolate(data[ij + 2], color[2], over)\n            data[ij + 3] = Math.max(color[3], data[ij + 3])\n        }\n    }\n}","import { Physics } from '../physics/physics.js'\r\nimport { Transform } from '../physics/transform'\r\nimport { ImageDataPloter } from './imageData.js'\r\n\r\nconst squareDistance = (point, nodeB) => {\r\n\tvar square = 0\r\n\tfor (var i = 0; i < point.length; i++)\r\n\t\tsquare += Math.pow((point[i] - nodeB.positions[i]), 2)\r\n\treturn isNaN(square) || square < 1 ? 1 : square\r\n}\r\n\r\nvar COLORS = 16 * 16\r\n\r\nfunction MassPloter(context, manager) {\r\n\tthis.context = context\r\n\tthis.imgData = new ImageDataPloter(context, manager)\r\n\tthis.manager = manager\r\n}\r\n\r\nMassPloter.prototype.update = function () {\r\n\tthis.imgData.update()\r\n}\r\n\r\nMassPloter.prototype.draw = function (view) {\r\n\tconst { x: centerX, y: centerY, scale } = view\r\n\tconst { context } = this\r\n\tvar canvasWidth = context.canvas.clientWidth\r\n\tvar canvasHeight = context.canvas.clientHeight\r\n\tconst canvasWidthHalf = canvasWidth / 2\r\n\tconst canvasHeightHalf = canvasHeight / 2\r\n\tconst stepX = 2\r\n\tconst stepY = 2\r\n\tconst halfStepX = stepX / 2\r\n\tconst halfStepY = stepY / 2\r\n\tvar startx = (centerX + canvasWidthHalf) % stepX\r\n\tvar starty = (centerY + canvasHeightHalf) % stepY\r\n\tvar inverseScale = stepY / scale\r\n\tconst points = this.manager.getEnities(Physics).map(\r\n\t\t(elem) => {\r\n\t\t\tvar physics = this.manager.get(Physics, elem)[0]\r\n\t\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\t\treturn {\r\n\t\t\t\tmass: physics.mass,\r\n\t\t\t\tpositions: transform.positions\r\n\t\t\t}\r\n\t\t})\r\n\tthis.imgData.pull()\r\n\tfor (var x = startx; x <= canvasWidth; x += stepX) {\r\n\t\tvar realX = (x - canvasWidthHalf) / scale + centerX\r\n\t\tvar realY = (starty - canvasHeightHalf) / scale + centerY\r\n\t\tfor (var y = starty; y <= canvasHeight; y += stepY) {\r\n\t\t\tvar sum = 0\r\n\t\t\tvar pointsLength = points.length\r\n\t\t\tfor (var i = 0; i < pointsLength; i++) {\r\n\t\t\t\tvar point = points[i]\r\n\t\t\t\tsum += 3000 * point.mass / squareDistance([realX, realY], point)\r\n\t\t\t}\r\n\t\t\tvar colorMin2 = Math.min(sum / 16.0, COLORS - 1)\r\n\t\t\tvar colorMin = Math.max(Math.min(sum, COLORS - 1) - colorMin2 * colorMin2 * 0.3, 0)\r\n\t\t\tthis.imgData.imgRect(x - halfStepX, y - halfStepY, stepX, stepY, [colorMin2, 0, colorMin])\r\n\t\t\trealY += inverseScale\r\n\t\t}\r\n\t}\r\n\tcontext.putImageData(this.imgData.img, 0, 0)\r\n}\r\n\r\nMassPloter.prototype.imgRect = function (x, y, width, height, color) {\r\n\r\n\tconst realWidth = Math.max(Math.min(width, this.context.canvas.clientWidth - x), 0)\r\n\tconst realHeight = Math.max(Math.min(height, this.context.canvas.clientHeight - y), 0)\r\n\tconst realX = Math.max(Math.round(x), 0)\r\n\tconst realY = Math.max(Math.round(y), 0)\r\n\tconst data = this.img.data\r\n\tconst startX = realX * 4\r\n\tconst endX = realWidth * 4 + startX\r\n\tconst rowLength = this.context.canvas.clientWidth * 4\r\n\tconst startY = realY * rowLength\r\n\tconst endY = realHeight * rowLength + startY\r\n\tfor (var i = startY; i < endY; i += rowLength) {\r\n\t\tfor (var j = startX; j < endX; j += 4) {\r\n\t\t\tvar ij = i + j\r\n\t\t\tdata[ij] = color[0]\r\n\t\t\tdata[ij + 1] = color[1]\r\n\t\t\tdata[ij + 2] = color[2]\r\n\t\t\tdata[ij + 3] = color[3]\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default MassPloter","import { interpolate } from '../../math/vec.js'\r\nimport { Physics } from '../physics/physics.js'\r\nimport { Transform } from '../physics/transform'\r\nimport { ImageDataPloter } from './imageData'\r\n\r\nconst distance = (point, pointB) => {\r\n\tvar square = 0\r\n\tfor (var i = 0; i < point.length; i++)\r\n\t\tsquare += (point[i] - pointB[i]) * (point[i] - pointB[i])\r\n\treturn isNaN(square) || square < 1 ? 1 : Math.sqrt(square)\r\n}\r\n\r\nfunction GalaxyPloter(context, manager, colors) {\r\n\tthis.colors = colors\r\n\tthis.context = context\r\n\tthis.imgData = new ImageDataPloter(context, manager)\r\n\tthis.manager = manager\r\n}\r\n\r\nGalaxyPloter.prototype.update = function () {\r\n\tthis.imgData.update()\r\n}\r\n\r\nGalaxyPloter.prototype.draw = function (view) {\r\n\tconst { x: centerX, y: centerY, scale } = view\r\n\tconst { context } = this\r\n\tvar canvasWidth = context.canvas.clientWidth\r\n\tvar canvasHeight = context.canvas.clientHeight\r\n\tconst canvasWidthHalf = canvasWidth / 2\r\n\tconst canvasHeightHalf = canvasHeight / 2\r\n\tconst stepX = 2\r\n\tconst stepY = 2\r\n\tconst halfStepX = stepX / 2\r\n\tconst halfStepY = stepY / 2\r\n\tvar startx = (centerX + canvasWidthHalf) % stepX\r\n\tvar starty = (centerY + canvasHeightHalf) % stepY\r\n\tvar inverseScale = stepY / scale\r\n\tconst points = this.manager.getEnities(Physics).map(\r\n\t\t(elem) => {\r\n\t\t\tvar physics = this.manager.get(Physics, elem)[0]\r\n\t\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\t\treturn {\r\n\t\t\t\tmass: physics.mass,\r\n\t\t\t\tpositions: transform.positions\r\n\t\t\t}\r\n\t\t})\r\n\tthis.imgData.pull()\r\n\tvar colorCount = new Array(this.colors.length).fill(0)\r\n\tfor (var x = startx; x <= canvasWidth; x += stepX) {\r\n\t\tvar realX = (x - canvasWidthHalf) / scale + centerX\r\n\t\tvar realY = (starty - canvasHeightHalf) / scale + centerY\r\n\t\tfor (var y = starty; y <= canvasHeight; y += stepY) {\r\n\t\t\tvar sum = 0\r\n\t\t\tvar pointsLength = points.length\r\n\t\t\tfor (var i = 0; i < pointsLength; i++) {\r\n\t\t\t\tvar point = points[i]\r\n\t\t\t\tsum += point.mass / distance([realX, realY], point.positions)\r\n\t\t\t}\r\n\t\t\tvar colorPosition = Math.max(this.colors.length - sum / 64.0, 0);\r\n\t\t\tvar over = colorPosition % 1\r\n\t\t\tvar index1 = Math.min(this.colors.length - 1, Math.floor(colorPosition))\r\n\t\t\tvar index2 = Math.min(this.colors.length - 1, Math.ceil(colorPosition))\r\n\t\t\tvar color = this.colors[index2]\r\n\t\t\tlet color2 = this.colors[index1]\r\n\t\t\tcolorCount[index1]++\r\n\t\t\tcolor = color.map((c, index) => interpolate(color2[index], c, over))\r\n\r\n\t\t\tthis.imgData.imgRect(x - halfStepX, y - halfStepY, stepX, stepY, [color[0], color[1], color[2]])\r\n\t\t\trealY += inverseScale\r\n\t\t}\r\n\t}\r\n\t//console.log(colorCount)\r\n\tcontext.putImageData(this.imgData.img, 0, 0)\r\n}\r\n\r\nexport default GalaxyPloter","import { interpolate, distance } from '../../math/vec.js'\r\nimport { ShapeCircle } from '../../shapes/circle.js'\r\nimport { Physics } from '../physics/physics.js'\r\nimport { Transform } from '../physics/transform'\r\nimport { ImageDataPloter } from './imageData.js'\r\n\r\nvar COLORS = 16 * 16\r\n\r\nfunction GassPloter(context, manager) {\r\n\tthis.context = context\r\n\tthis.imgData = new ImageDataPloter(context, manager)\r\n\tthis.update();\r\n\tthis.manager = manager\r\n}\r\n\r\nGassPloter.prototype.update = function () {\r\n\tthis.width = this.context.canvas.clientWidth\r\n\tthis.height = this.context.canvas.clientHeight\r\n\tthis.step = 4\r\n\tthis.widthSteps = this.width / this.step\r\n\tthis.heightSteps = this.height / this.step\r\n\tthis.number = this.widthSteps * this.heightSteps\r\n\tthis.cells = {\r\n\t\tp: new Float32Array(this.number),\r\n\t\tv: new Float32Array(this.number),\r\n\t\th: new Float32Array(this.number),\r\n\t\to: new Uint8Array(this.number),\r\n\t}\r\n\tthis.cells.p.fill(1)\r\n\tthis.cells.v.fill(0)\r\n\tthis.cells.h.fill(0)\r\n\tthis.cells.o.fill(0)\r\n\tthis.imgData.update()\r\n}\r\n\r\nGassPloter.prototype.draw = function (view) {\r\n\tconst { x: centerX, y: centerY, scale } = view\r\n\tconst { context } = this\r\n\tvar canvasWidth = context.canvas.clientWidth\r\n\tvar canvasHeight = context.canvas.clientHeight\r\n\tconst canvasWidthHalf = canvasWidth / 2\r\n\tconst canvasHeightHalf = canvasHeight / 2\r\n\tconst stepX = this.step\r\n\tconst stepY = this.step\r\n\tconst halfStepX = stepX / 2\r\n\tconst halfStepY = stepY / 2\r\n\tvar startx = (centerX + canvasWidthHalf) % stepX\r\n\tvar starty = (centerY + canvasHeightHalf) % stepY\r\n\tvar inverseScale = stepY / scale\r\n\tthis.imgData.pull()\r\n\tconst points = this.manager.getEnities(Physics).map(\r\n\t\t(elem) => {\r\n\t\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\t\tvar shape = this.manager.get(ShapeCircle, elem)[0]\r\n\t\t\tvar physics = this.manager.get(Physics, elem)[0]\r\n\t\t\treturn {\r\n\t\t\t\tspeeds: physics.speeds,\r\n\t\t\t\tradius: shape && shape.radius,\r\n\t\t\t\tpositions: transform.positions\r\n\t\t\t}\r\n\t\t}).filter(({ radius }) => !!radius)\r\n\t//this.cells.o.fill(0)\r\n\tfor (var x = startx; x <= canvasWidth; x += stepX) {\r\n\t\tvar realX = (x - canvasWidthHalf) / scale + centerX\r\n\t\tvar realY = (starty - canvasHeightHalf) / scale + centerY\r\n\t\tvar realXround = Math.max(Math.round(realX - halfStepX), 0)\r\n\t\tfor (var y = starty; y <= canvasHeight; y += stepY) {\r\n\t\t\tvar realYround = Math.max(Math.round(realY - halfStepY), 0)\r\n\t\t\tvar cellId = realXround + realYround * this.widthSteps\r\n\t\t\tvar sum = 0\r\n\t\t\tvar pointsLength = points.length\r\n\t\t\tfor (var i = 0; i < pointsLength; i++) {\r\n\t\t\t\tvar point = points[i]\r\n\t\t\t\tif (point.radius >\r\n\t\t\t\t\tdistance(point.positions[0],\r\n\t\t\t\t\t\tpoint.positions[1],\r\n\t\t\t\t\t\trealX,\r\n\t\t\t\t\t\trealY)) {\r\n\t\t\t\t\tthis.cells.o[cellId] = 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.cells[cellId]) {\r\n\t\t\t\tsum += 128\r\n\t\t\t}\r\n\t\t\tvar colorMin2 = Math.min(sum, COLORS - 1)\r\n\t\t\tvar colorMin = Math.max(Math.min(sum, COLORS - 1) - colorMin2 * colorMin2 * 0.3, 0)\r\n\t\t\tthis.imgData.imgRect(x - halfStepX, y - halfStepY, stepX, stepY, [255 - colorMin, 0, 255 - colorMin2])\r\n\t\t\trealY += inverseScale\r\n\t\t}\r\n\t}\r\n\tcontext.putImageData(this.imgData.img, 0, 0)\r\n}\r\n\r\nexport default GassPloter","import { Physics } from './physics.js'\r\nimport { Transform } from './transform.js'\r\n\r\nfunction ChainLink(connects, distance) {\r\n\tthis.connects = connects\r\n\tthis.distance = distance\r\n}\r\n\r\nfunction computeChainForce(\r\n\tnaibor,\r\n\ttransform,\r\n) {\r\n\tvar ret = [0, 0]\r\n\tnaibor.forEach(({ transform: naiborTranform, distance: naiborDistance }) => {\r\n\t\tvar distanceX = (naiborTranform.positions[0] - transform.positions[0])\r\n\t\tvar distanceY = (naiborTranform.positions[1] - transform.positions[1])\r\n\t\tvar distanceAngle = Math.atan2(distanceY, distanceX)\r\n\t\tvar distance = Math.sqrt(\r\n\t\t\tdistanceX * distanceX\r\n\t\t\t+ distanceY * distanceY)\r\n\t\tvar distanceNormalised = distance / naiborDistance\r\n\t\tvar forceIntencity = (Math.atan((distanceNormalised - 1) * 5) + Math.pow(distanceNormalised - 1, 3))\r\n\t\tvar forceComponents = {\r\n\t\t\tx: Math.cos(distanceAngle) * forceIntencity,\r\n\t\t\ty: Math.sin(distanceAngle) * forceIntencity\r\n\t\t}\r\n\t\tret[0] += forceComponents.x\r\n\t\tret[1] += forceComponents.y\r\n\t})\r\n\treturn ret\r\n}\r\n\r\nfunction ChainEngine(manager) {\r\n\tthis.manager = manager\r\n\r\n}\r\n\r\nChainEngine.prototype.compute = function () {\r\n\tthis.manager.getEnities(ChainLink).map(\r\n\t\t(elem) => {\r\n\t\t\tvar chainLinks = this.manager.get(ChainLink, elem)\r\n\t\t\tvar naibor = chainLinks.map(link => ({ transform: this.manager.get(Transform, link.connects)[0], distance: link.distance }))\r\n\t\t\tvar transform = this.manager.get(Transform, elem)[0]\r\n\t\t\tvar physics = this.manager.get(Physics, elem)[0]\r\n\t\t\tvar force = computeChainForce(\r\n\t\t\t\tnaibor,\r\n\t\t\t\ttransform\r\n\t\t\t)\r\n\t\t\tphysics.applyForce(force)\r\n\t\t}\r\n\t)\r\n}\r\n\r\nexport {\r\n\tChainLink,\r\n\tChainEngine\r\n}","\r\nimport { EntityManager } from '../../lib/ecs'\r\nimport Touch from '../../lib/fe/touch'\r\n\r\nimport { PhysicsEngine, Physics } from '../../lib/ecs/physics/physics.js'\r\nimport { ShapeCircle } from '../../lib/shapes/circle.js'\r\nimport { PlasticBody, PlasticColisionEngine } from '../../lib/ecs/physics/plasticColisionEngine'\r\nimport { GravityEngine } from '../../lib/ecs/physics/gravityEngine'\r\nimport { GravityColorEngine } from './gravityColorEngine'\r\n\r\nimport { Transform } from '../../lib/ecs/physics/transform.js'\r\n\r\nimport Ploter from '../../lib/ecs/drawers/ploter.js'\r\nimport FPSPloter from '../../lib/ecs/drawers/drawFPS.js'\r\nimport GridPloter from '../../lib/ecs/drawers/drawGrid.js'\r\nimport { Renderer, RenderEngine } from '../../lib/ecs/drawers/render.js'\r\nimport MassPloter from '../../lib/ecs/drawers/drawMass.js'\r\nimport GalaxyPloter from '../../lib/ecs/drawers/drawGalaxy'\r\nimport GassPloter from '../../lib/ecs/drawers/drawGass.js'\r\nimport { ChainEngine } from '../../lib/ecs/physics/chainEngine.js'\r\nimport { skyColors } from './colors'\r\nimport { MassRust } from './rustimpl'\r\n\r\n\r\nconst canvas = document.getElementById('phy_canvas')\r\nconst toolokInput = document.getElementById('tolook_value')\r\nconst drawMass = document.getElementById('draw_mass')\r\nconst drawMassRust = document.getElementById('draw_mass_rust')\r\nconst drawGalaxy = document.getElementById('draw_galaxy')\r\nconst drawGass = document.getElementById('draw_gass')\r\nconst drawGrid = document.getElementById('draw_grid')\r\nconst drawFPS = document.getElementById('draw_fps')\r\nconst fullSpeed = document.getElementById('full_speed')\r\nconst drawPlanets = document.getElementById('draw_planets')\r\nconst maxPlanets = document.getElementById('max_planets')\r\n\r\nvar draw = new Ploter(canvas)\r\n\r\ncanvas.width = 640\r\ncanvas.height = 480\r\n\r\nvar position = { x: 0, y: 0, scale: 0.2 }\r\n\r\nwindow.addEventListener('mousewheel', function (e) {\r\n\tposition.scale *= e.wheelDelta > 0 ? 1.1 : 0.88\r\n})\r\n\r\nconst fps = new FPSPloter(draw.context)\r\nconst grid = new GridPloter(draw.context)\r\n\r\nvar manager = new EntityManager()\r\n\r\n\r\nconst points = new RenderEngine(draw.context, manager)\r\nconst mass = new MassPloter(draw.context, manager)\r\nconst massRust = new MassRust(draw.context, manager)\r\nconst galaxy = new GalaxyPloter(draw.context, manager, skyColors)\r\nconst gass = new GassPloter(draw.context, manager)\r\nconst gravityEngine = new GravityEngine(manager)\r\nconst colisionEngine = new PlasticColisionEngine(manager)\r\nconst gravityColorEngine = new GravityColorEngine(manager)\r\nconst chainEngine = new ChainEngine(manager)\r\nconst physics = new PhysicsEngine(manager, [gravityEngine,\r\n\tcolisionEngine,\r\n\tgravityColorEngine,\r\n\tchainEngine\r\n])\r\nvar touch = new Touch(canvas, 100)\r\ntouch.sub('force', ({ delta, deltaZoom }) => {\r\n\tposition = {\r\n\t\t...position, scale: position.scale * deltaZoom, x: position.x - delta.x / position.scale,\r\n\t\ty: position.y - delta.y / position.scale\r\n\t}\r\n})\r\n\r\nvar entity = null\r\n\r\nvar all = []\r\n\r\nfunction calculateMass(radius) {\r\n\tvar massVolume = 0.2 + Math.tanh((radius - 50) * 0.2) * 0.05 + Math.tanh((20 - radius) * 0.2) * 0.1\r\n\tconsole.log(\"ffdsdf\")\r\n\treturn Math.pow(radius, 3) * Math.PI * massVolume\r\n}\r\n\r\nfunction createSnode(positions, speeds, radius) {\r\n\tentity = manager.create()\r\n\tmanager.asign(new Transform(positions), entity)\r\n\tmanager.asign(new Physics(speeds, calculateMass(radius), 0), entity)\r\n\tmanager.asign(new ShapeCircle(radius), entity)\r\n\tmanager.asign(new Renderer('#aaffbb'), entity)\r\n\tmanager.asign(new PlasticBody(), entity)\r\n\treturn entity\r\n}\r\n\r\n\r\n\r\n\r\n\r\nall.push(createSnode([0, 0], [0, 0], 55, all, 'Sun'))\r\n\r\n\r\nall.push(createSnode([255, 0], [0, 5], 3, all, 'Mercury'))\r\nall.push(createSnode([300, 0], [0, 5], 4, all, 'Venus'))\r\nall.push(createSnode([450, 0], [0, 4], 7, all, 'Earth'))\r\nall.push(createSnode([600, 0], [0, 4], 4, all, 'Mars'))\r\nlet yupiter = createSnode([1400, 0], [0, 2.5], 35, all, 'Jupiter')\r\nall.push(yupiter)\r\nall.push(createSnode([1440, 0], [0, 6], 2, all, 'Europa'))\r\nall.push(createSnode([1450, 0], [0, 6], 2, all, 'Europa'))\r\nall.push(createSnode([2800, 0], [0, 2.5], 5, all, 'Saturn'))\r\n\r\n\r\nconst generateItem = (size) => {\r\n\tvar angle = Math.random() * 2 * Math.PI\r\n\tvar radius = 200 + Math.random() * 2000\r\n\tvar x = Math.sin(angle) * radius\r\n\tvar y = Math.cos(angle) * radius\r\n\tvar tan = Math.atan2(x, y) - Math.PI / 2\r\n\r\n\tvar el = createSnode(\r\n\t\t[x, y],\r\n\t\t[(10 * Math.sin(tan) + Math.random() * 14 - 7), (10 * Math.cos(tan) + Math.random() * 14 - 7)],\r\n\t\tsize || (0.1 + Math.random()), all)\r\n\tall.push(el)\r\n}\r\n\r\n\r\n\r\nsetInterval(() => {\r\n\tlet max = parseInt(maxPlanets.value) || 100\r\n\tif (all.length < max - 10) {\r\n\t\tfor (let i = 0; i < 10; i++) generateItem(1)\r\n\t}\r\n\tall.forEach((el, index) => (index > max) &&\r\n\t\tmanager.destroy(el)\r\n\t)\r\n}, 50)\r\n\r\n\r\n\r\n\r\n\r\nfunction work() {\r\n\tvar numb = parseInt(toolokInput.value) - 1\r\n\tif (!isNaN(numb) && numb >= 0) {\r\n\t\tvar toLookEntity = all[numb % all.length]\r\n\t\tvar toLookTransform = manager.get(Transform, toLookEntity)[0]\r\n\t\tposition.x = toLookTransform.positions[0]\r\n\t\tposition.y = toLookTransform.positions[1]\r\n\t}\r\n\tdraw.clear()\r\n\r\n\tif (drawGrid.checked)\r\n\t\tgrid.draw(100, 100, position)\r\n\tif (drawMass.checked)\r\n\t\tmass.draw(position)\r\n\tif (drawMassRust.checked)\r\n\t\tmassRust.drawAll(position)\r\n\tif (drawGass.checked)\r\n\t\tgass.draw(position)\r\n\tif (drawGalaxy.checked) {\r\n\t\tgalaxy.draw(position)\r\n\t}\r\n\tif (drawPlanets.checked)\r\n\t\tpoints.draw(position)\r\n\tif (drawFPS.checked)\r\n\t\tfps.draw()\r\n\tphysics.compute()\r\n\r\n\tall = all.filter(function (e, index) {\r\n\t\tvar alive = manager.alive(e)\r\n\t\tif (!alive && !isNaN(numb) && numb >= index) {\r\n\t\t\ttoolokInput.value = numb - 1\r\n\t\t}\r\n\t\treturn alive\r\n\t})\r\n\tif (numb >= all.length) {\r\n\t\ttoolokInput.value = all.length - 1\r\n\t}\r\n\tsetTimeout(work, fullSpeed.checked ? 0 : 15)\r\n}\r\nwork()","import { ImageDataPloter } from \"../../../lib/ecs/drawers/imageData\";\nimport { Physics } from \"../../../lib/ecs/physics/physics\";\nimport { Transform } from \"../../../lib/ecs/physics/transform\";\n\nexport class MassRust {\n\tconstructor(context, manager) {\n\t\tthis.manager = manager\n\t\tthis.context = context\n\t\tthis.positionArray = new Float32Array([0, 0, 1])\n\t\tthis.planetsArray = new Float32Array([]);\n\t\tthis.imgData = new ImageDataPloter(context, manager)\n\t\tthis.update()\n\t}\n\tupdate() {\n\t\tthis.imgData.update()\n\t\tthis.width = this.context.canvas.clientWidth\n\t\tthis.height = this.context.canvas.clientHeight\n\t\tthis.gravity = null\n\t\timport('../../../gravity_calc/pkg').then(({ Gravity }) => {\n\t\t\tthis.gravity = Gravity.new(this.width, this.height)\n\t\t})\n\t}\n\n\tdrawAll(position) {\n\t\tif (!this.gravity) return\n\t\tvar gravity = this.gravity\n\t\tvar all = this.manager.getEnities(Physics)\n\t\tvar planetsDataLength = all.length * 3\n\t\tif (this.planetsArray.length !== planetsDataLength)\n\t\t\tthis.planetsArray = new Float32Array(all.length * 3);\n\t\tvar bufferIndex = 0;\n\t\tall.forEach((el) => {\n\t\t\tvar transform = this.manager.get(Transform, el)[0]\n\t\t\tvar physic = this.manager.get(Physics, el)[0]\n\t\t\tthis.planetsArray[bufferIndex] = transform.positions[0]\n\t\t\tthis.planetsArray[bufferIndex + 1] = transform.positions[1]\n\t\t\tthis.planetsArray[bufferIndex + 2] = physic.mass\n\t\t\tbufferIndex += 3\n\t\t})\n\t\tthis.positionArray[0] = position.x\n\t\tthis.positionArray[1] = position.y\n\t\tthis.positionArray[2] = position.scale\n\t\tthis.imgData.pull()\n\t\tgravity.draw_planets(\n\t\t\tthis.imgData.img.data,\n\t\t\tthis.planetsArray,\n\t\t\tplanetsDataLength,\n\t\t\tthis.positionArray\n\t\t);\n\t\tthis.context.putImageData(this.imgData.img, 0, 0);\n\t}\n}","export const skyColors = [\n    [0xFF, 0xFF, 0xFF],\n    [0x6F, 0xC4, 0xA5],\n    [0xA3, 0x7B, 0xAD],\n    [0x93, 0x6C, 0xA1],\n    [0x2C, 0x4E, 0x8A],\n    [0x3E, 0x1B, 0x9C],\n    [0x64, 0x18, 0x1D],\n    [0x15, 0x05, 0x22],\n    [0x0A, 0x0C, 0x1D],\n    [0x00, 0x00, 0x00]\n]"],"names":["webpackQueues","webpackExports","webpackError","resolveQueue","inProgress","dataWebpackPrefix","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","id","loaded","__webpack_modules__","Entity","this","EntityManager","_generation","_free_indices","_entities","_components","__entities_with_type","distance2d","a","b","Math","sqrt","x","y","len2d","getDelta","p1","n1","p2","n2","getZoom","initialDistance","newDistance","getAngleDelta","angle1","getAngle","delta","atan2","Touch","div","deadzone","clear","startPosition","startMoveSecound","position","thisMoveSecound","mouseDown","click","touch","touchSecound","centerPosition","debug","console_error","throw_error","last_error","moveTouchT","e","preventDefault","top","left","target","getBoundingClientRect","touches","first","clientX","clientY","secound","moveTouch","moveTouchM","triger","deltaZoom","deltaAngle","direction","zoom","distance","angle","JSON","stringify","addition","isClick","isPrimary","abs","stopTouch","saveMove","button","addEventListener","m","Symbol","queue","d","forEach","fn","r","body","hasAwait","currentDeps","outerResolve","reject","depQueues","Set","promise","Promise","resolve","rej","deps","map","dep","then","obj","ret","wrapDeps","getResult","fnQueue","q","has","add","push","err","definition","key","o","Object","defineProperty","enumerable","get","f","chunkId","all","keys","reduce","promises","u","hmd","create","children","set","Error","prop","prototype","hasOwnProperty","call","l","url","done","script","needAttach","scripts","document","getElementsByTagName","i","length","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","setTimeout","bind","type","head","appendChild","toStringTag","value","v","wasmModuleId","wasmModuleHash","importsObj","req","fetch","p","WebAssembly","instantiateStreaming","res","assign","instance","arrayBuffer","bytes","instantiate","installedChunks","j","installedChunkData","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","self","index","generation","idx","shift","entity","make_entity","alive","destroy","asign","component","entity_components","components_of_type","constructor","find","comp","c_type","remove","filter","compon","getEnities","values","sub","ev","func","events","onClick","onForce","force","onStop","stop","onUp","up","onDown","down","onLeft","onRight","right","unsub","fu","clearEvlent","start","bmiddle","bright","args","console","log","foo","stack","Vector","array","Array","item","arr","pop","Transform","positions","Physics","speeds","mass","drag","isNaN","maxSpeed","PhysicsEngine","manager","engines","ShapeCircle","radius","PlasticBody","PlasticColisionEngine","physic_entity","computeColision","compute","naibors","collisions","element","distanceX","distanceY","centerDistance","nodeA","nodeB","square","pow","squareDistance","GravityEngine","interaction","computeAttraction","distance2","ascIntencity","ShapeBox","size_x","size_y","ShapeText","font","text","Sprite","image","ShapeRounded","TransformRotate","rotate","ShapeNoScale","noscale","ShapeScale","scale","Renderer","color","stroke","layer","RenderEngine","context","maxSize","shapeDone","renderer","fillStyle","fill","strokeStyle","lineWidth","width","roundedRect","height","moveTo","lineTo","arcTo","GravityColorEngine","z","writable","configurable","toAdd","copy","k","update","newValues","negate","substract","magnitude","normalise","applyForce","applyAsc","asc","speedValue","speedMultipliyer","min","engine","elem","physics","transform","circle","colisions","collisionIndex","collision","merge","cubeRadiusA","cubeRadiusB","newRadious","cbrt","massA","massB","draw","view","canvasWidth","canvas","clientWidth","canvasHeight","clientHeight","centerX","centerY","canvasWidthHalf","canvasHeightHalf","save","translate","sort","fixed","selfScale","scaleWith","circles","elementSize","beginPath","arc","PI","boxes","rounded","box","rect","restore","sprites","sprite","spriteWith","spriteHeight","drawImage","texts","parseInt","fillText","mesure","measureText","planetColors","toHex","num","out","toString","worldToScreen","viewCenterX","viewCenterY","viewScale","screenW","screenH","pointX","pointY","screenToWorld","Ploter","getContext","willReadFrequently","img","createImageData","renderers","dencity","round","clearRect","getCanvas","point","FPSPloter","time","Date","getTime","fps","newTime","deltaT","interpolate","vecA","vecB","over","GridPloter","ctx","options","showCords","showAxis","axisCords","axisScale","devide","sizex","sizey","gridScale","stepX","stepY","startx","starty","scrCenterX","scrCenterY","cordX","drawCod","cordY","Number","EPSILON","eX","eY","outOfScreen","trimNum","parseFloat","toFixed","ext","eyt","line","ImageDataPloter","pull","getImageData","imgRect","pointB","realWidth","max","realHeight","realX","realY","startX","endX","rowLength","startY","endY","ij","MassPloter","imgData","inverseScale","points","sum","pointsLength","colorMin2","COLORS","colorMin","putImageData","GalaxyPloter","colors","colorCount","colorPosition","index1","floor","index2","ceil","color2","c","GassPloter","step","widthSteps","heightSteps","number","cells","Float32Array","h","Uint8Array","halfStepX","halfStepY","shape","realXround","cellId","aX","aY","ChainLink","connects","ChainEngine","naibor","link","naiborTranform","naiborDistance","distanceAngle","distanceNormalised","forceIntencity","atan","forceComponents","cos","sin","computeChainForce","getElementById","toolokInput","drawMassRust","fullSpeed","drawPlanets","maxPlanets","window","wheelDelta","grid","massRust","positionArray","planetsArray","gravity","Gravity","new","drawAll","planetsDataLength","bufferIndex","el","physic","draw_planets","galaxy","gass","gravityEngine","colisionEngine","gravityColorEngine","chainEngine","createSnode","massVolume","tanh","calculateMass","yupiter","setInterval","tan","random","work","numb","toLookEntity","toLookTransform","checked"],"sourceRoot":""}